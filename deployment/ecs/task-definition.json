{
  "family": "appointment-service",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "256",
  "memory": "512",
  "containerDefinitions": [{
    "name": "appointment-service",
    "image": "ACCOUNT_ID.dkr.ecr.REGION.amazonaws.com/appointment-service:latest",
    "essential": true,
    "portMappings": [{ "containerPort": 3002, "protocol": "tcp" }],
    "environment": [
      { "name": "NODE_ENV", "value": "production" },
      { "name": "PORT", "value": "3002" },
      { "name": "SERVICE_NAME", "value": "appointment-service" },
      { "name": "DB_DIALECT", "value": "mysql" },
      { "name": "API_PREFIX", "value": "/api/v1" }
    ],
    "secrets": [
      { "name": "DB_HOST", "valueFrom": "arn:aws:secretsmanager:REGION:ACCOUNT_ID:secret:appointment-service/db-host" },
      { "name": "DB_PORT", "valueFrom": "arn:aws:secretsmanager:REGION:ACCOUNT_ID:secret:appointment-service/db-port" },
      { "name": "DB_NAME", "valueFrom": "arn:aws:secretsmanager:REGION:ACCOUNT_ID:secret:appointment-service/db-name" },
      { "name": "DB_USER", "valueFrom": "arn:aws:secretsmanager:REGION:ACCOUNT_ID:secret:appointment-service/db-user" },
      { "name": "DB_PASSWORD", "valueFrom": "arn:aws:secretsmanager:REGION:ACCOUNT_ID:secret:appointment-service/db-password" },
      { "name": "JWT_SECRET", "valueFrom": "arn:aws:secretsmanager:REGION:ACCOUNT_ID:secret:appointment-service/jwt-secret" }
    ],
    "logConfiguration": {
      "logDriver": "awslogs",
      "options": {
        "awslogs-group": "/ecs/appointment-service",
        "awslogs-region": "REGION",
        "awslogs-stream-prefix": "ecs"
      }
    }
  }],
  "executionRoleArn": "arn:aws:iam::ACCOUNT_ID:role/ecsTaskExecutionRole",
  "taskRoleArn": "arn:aws:iam::ACCOUNT_ID:role/ecsTaskRole"
}
